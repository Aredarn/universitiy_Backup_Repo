<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnakeGame</title>
</head>
<body>
    
    <canvas id="mainGame" width="400" height="400"></canvas>


    <script>
        xv=yv=0;
        px=py=10;
        gridS=tileC=20;
        ax=ay=15;
        sx=sy=10;
        trail=[];
        tail=5;
        

        window.onload=function()
        {
            canv=document.getElementById("mainGame");
            ctx = canv.getContext("2d");
            window.addEventListener('keydown',this.check,false);
            setInterval(game,1000/15);
        }

        function game()
        {
            px+=xv;
            py+=yv;

            if(px<0)
            {
                px= tileC-1;
            }
            if(px>tileC-1)
            {
                px=0;
            }
            if(py<0)
            {
                py=tileC-1;
            }
            if(py>tileC-1)
            {
                py=0;
            }

            ctx.fillStyle="black";
            ctx.fillRect(0,0,canv.width,canv.height);

            ctx.fillStyle="lime";
            for(var i=0;i<trail.length;i++){
                ctx.fillRect(trail[i].x*gridS,trail[i].y*gridS,gridS-2,gridS-2);
                if(trail[i].x==px && trail[i].y==py)
                {
                    tail=5;
                    
                }
            }
            trail.push({x:px,y:py});

            while(trail.length>tail)
            {
                trail.shift();
            }

            if(ax==px &&ay==py)
            {
                tail++;
                
                ax=Math.floor(Math.random()*tileC);
                ay=Math.floor(Math.random()*tileC);

            }
        
            ctx.fillStyle="red";
            ctx.fillRect(ax*gridS,ay*gridS,gridS-2,gridS-2);

        }

        
        function check(e) {
            var code = e.keyCode;
            switch (code) {
                case 37: console.log("Left"); 
                        xv = -1; yv = 0;
                        break; //Left key
                case 38: console.log("Up"); 
                        xv = 0; yv = -1;
                        break; //Up key
                case 39: console.log("Right"); 
                        xv = 1; yv = 0;
                        break; //Right key
                case 40: console.log("Down"); 
                        xv = 0; yv = 1;
                        break; //Down key                
             }
        }


    </script>

</body>
</html>